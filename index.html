<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Map Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=DM+Serif+Display&family=Karla:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="design.css">
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pptxgenjs@3.11.0/dist/pptxgen.bundle.js"></script>
    <script defer src="script.js"></script>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>Design Map Generator</h1>
        </div>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab active" data-tab="input">Input</button>
            <button class="tab" data-tab="markdown">Markdown Input (with LCC's assistance)</button>
            <button class="tab" data-tab="output">Design Map</button>
            <button class="tab" data-tab="charts">Charts</button>
            <button class="tab" data-tab="lcc">Lesson Plan Prompt Generator (using LCC)</button>
        </div>

        <!-- INPUT TAB -->
        <div id="input" class="tab-content active">
            <div class="section">
                <h2 class="section-title">Overview</h2>
                <div class="form-group">
                    <label for="topic">Topic</label>
                    <input type="text" id="topic" placeholder="Enter lesson topic">
                </div>
                <div class="form-group">
                    <label for="level">Level</label>
                    <input type="text" id="level" placeholder="e.g., Secondary 1">
                </div>
                <div class="form-group">
                    <label for="studentProfile">Student profile</label>
                    <input type="text" id="studentProfile" placeholder="e.g., Mixed ability, English language learners">
                </div>
                <div class="form-group">
                    <label for="duration">Duration (minutes)</label>
                    <input type="number" id="duration" value="60">
                </div>
                <div class="form-group">
                    <label for="learningOutcomes">Learning outcomes</label>
                    <textarea id="learningOutcomes" placeholder="List the intended outcomes..."></textarea>
                </div>
                <div class="form-group">
                    <label for="prerequisiteKnowledge">Prerequisite knowledge</label>
                    <textarea id="prerequisiteKnowledge" placeholder="What should students already know?"></textarea>
                </div>
                <div class="form-group">
                    <label for="learningIssues">Learning issue to be addressed</label>
                    <textarea id="learningIssues" placeholder="Describe the learning issue..."></textarea>
                </div>
                <div class="form-group">
                    <label for="techIntegration">Level of technology integration</label>
                    <select id="techIntegration">
                        <option value="optional">Optional</option>
                        <option value="replacement">Replacement</option>
                        <option value="amplification">Amplification</option>
                        <option value="transformation">Transformation</option>
                    </select>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">Learning Activities <span class="inline-note">Note: For PPTX download, please do not exceed 6 activities.</span></h2>
                <div class="validation-warning" id="inputWarning" aria-live="polite"></div>
                <div id="activitiesContainer"></div>
                <div class="activity-actions-bar">
                    <button class="btn btn-add" id="addActivityBtn">
                        <span class="btn-add-icon">+</span> Add Activity
                    </button>
                </div>
            </div>

            <p class="required-note required-note-top">* indicates a compulsory field.</p>
            <div class="action-buttons">
                <button class="btn btn-primary" id="generateBtn">Generate Design Map</button>
                <button class="btn btn-ghost" id="clearBtn">Clear All</button>
                <span class="inline-note">Your inputs are temporarily saved in this browser. Use “Clear All” to delete the saved data.</span>
                <span class="save-indicator" id="saveIndicator" aria-live="polite">Saved</span>
            </div>
        </div>

        <!-- MARKDOWN INPUT TAB -->
        <div id="markdown" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Markdown Input (with LCC's assistance)</h2>
                    <div class="section-header-actions">
                        <button class="btn btn-secondary" id="pasteMarkdownSampleBtn" type="button">Paste Sample Format</button>
                        <button class="btn btn-primary" id="applyMarkdownBtn" type="button">Apply Markdown</button>
                    </div>
                </div>
                <p class="instruction-text">Markdown will only be captured if it follows the format shown below.</p>
                <textarea id="markdownInput" class="markdown-box" placeholder="Paste your markdown here..."></textarea>
            </div>
            <div class="section">
                <h2 class="section-title">Notes</h2>
                <pre class="markdown-sample">Important:
- The chatbot/LLM must type the field names and dropdown values exactly as shown.
- The markdown will only be captured if the format is followed.</pre>
            </div>
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Sample Prompt For LLM</h2>
                    <button class="btn btn-secondary" id="copyMarkdownPromptBtn" type="button">Copy Prompt</button>
                </div>
                <pre class="markdown-sample" id="markdownPromptSample">Context: This is to help generate a Design Map for a lesson plan using the Design Map Generator. 
Please follow the instructions carefully.

You are given the following markdown template. Fill in every field value, and keep ALL field names exactly as written. 
There can be more than 2 activities. Ask the user how many activities to include, then collect and confirm the details for each activity before you finalize the markdown.
Once the fields are confirmed, output the completed markdown exactly in the format shown.
For dropdown fields, use one of the allowed values shown below. Return only the completed markdown in the same format.
Strict rules:
- Return ONLY the markdown. No extra text, no explanations.
- Do not rename any field or heading.
- Keep the same order and spacing.
- Do not add bullets or additional sections.

Character limits:
- Learning outcomes: ≤ 250 characters
- Prerequisite knowledge: ≤ 250 characters
- Learning issue to be addressed: ≤ 250 characters
- Activity Details: ≤ 115 characters
- Tech Tool: ≤ 25 characters

Allowed dropdown values:
- Level of technology integration: Optional | Replacement | Amplification | Transformation
- Interaction Type: Community (Student - Community) | Class (Teacher - Student) | Group (Student - Student) | Individual (Student - Content)
- Active Learning Process: Activate Learning | Promote thinking and discussion | Facilitate Demonstration of Learning | Monitor and Provide Feedback
- Key Application of Technology: Support Assessment for Learning | Foster Conceptual Change | Provide Differentiation | Facilitate Learning Together | Develop Metacognition | Enable Personalisation | Embed Scaffolding | Increase Motivation

Markdown template to fill:

# Lesson Overview
Topic:
Level:
Student profile:
Duration (minutes):
Learning outcomes:
Prerequisite knowledge:
Learning issue to be addressed:
Level of technology integration:

# Activities

## Activity 1
Interaction Type:
Active Learning Process:
Time (mins):
Activity Details:
Key Application of Technology:
Tech Tool:

## Activity 2
Interaction Type:
Active Learning Process:
Time (mins):
Activity Details:
Key Application of Technology:
Tech Tool:</pre>
            </div>
            <pre class="markdown-sample" id="markdownSampleTemplate" style="display:none;"># Lesson Overview
Topic:
Level:
Student profile:
Duration (minutes):
Learning outcomes:
Prerequisite knowledge:
Learning issue to be addressed:
Level of technology integration:

# Activities

## Activity 1
Interaction Type:
Active Learning Process:
Time (mins):
Activity Details:
Key Application of Technology:
Tech Tool:

## Activity 2
Interaction Type:
Active Learning Process:
Time (mins):
Activity Details:
Key Application of Technology:
Tech Tool:</pre>
        </div>

        <!-- OUTPUT TAB -->
        <div id="output" class="tab-content">
            <div class="section">
                <div class="section-header section-header-right">
                    <button class="btn btn-secondary" id="downloadJpgBtn">Download Design Map Image</button>
                    <button class="btn btn-secondary" id="downloadPptxBtn" title="Don't exceed 6 activities for PPTX download.">Download Design Map (Editable PPTX)</button>
                </div>
                <div class="validation-warning" id="outputWarning" aria-live="polite"></div>
                <div id="designMapContainer" class="print-root">
                    <div class="empty-state">
                        <div class="empty-icon">Map</div>
                        <h3>No Design Map Yet</h3>
                        <p>Fill in activities and click "Generate Design Map"</p>
                    </div>
                </div>
            </div>
            <aside class="output-editor" id="outputEditor" aria-hidden="true">
                <div class="output-editor-header">
                    <h3>Edit Activity <span id="outputEditorTitle"></span></h3>
                    <button class="btn btn-ghost output-editor-close" id="outputEditorClose" type="button">Close</button>
                </div>
                <div class="form-group">
                    <label>Interaction Type <span class="required" title="Compulsory field">*</span></label>
                    <select id="editorInteraction"></select>
                </div>
                <div class="form-group">
                    <label>Active Learning Process <span class="required" title="Compulsory field">*</span></label>
                    <select id="editorAlp"></select>
                </div>
                <div class="form-group">
                    <label>Time (mins)</label>
                    <input type="number" id="editorTime" min="0">
                </div>
                <div class="form-group">
                    <label>Activity Details <span class="required" title="Compulsory field">*</span></label>
                    <textarea id="editorDetails" maxlength="115"></textarea>
                </div>
                <div class="form-group">
                    <label>Key Application of Technology</label>
                    <select id="editorKeyApp"></select>
                </div>
                <div class="form-group">
                    <label>Tech Tool</label>
                    <input type="text" id="editorTech" maxlength="25">
                </div>
                <div class="output-editor-actions">
                    <button class="btn btn-secondary" id="outputEditorAdd" type="button">Add Activity</button>
                    <button class="btn btn-danger" id="outputEditorDelete" type="button">Delete Activity</button>
                </div>
            </aside>
        </div>

        <!-- CHARTS TAB -->
        <div id="charts" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Charts</h2>
                    <button class="btn btn-secondary" id="downloadChartsBtn">Download Charts</button>
                </div>
                <div id="chartsDownloadRoot">
                    <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Active Learning Process</h3>
                            <p>Time distribution (in minutes)</p>
                        </div>
                        <div class="chart-body">
                            <div class="pie-chart alp-chart" data-chart="alp">
                                <span class="pie-label" data-slice="activate"></span>
                                <span class="pie-label" data-slice="promote"></span>
                                <span class="pie-label" data-slice="facilitate"></span>
                                <span class="pie-label" data-slice="monitor"></span>
                            </div>
                            <div class="chart-legend">
                                <div class="chart-legend-item" data-key="activate">
                                    <span class="legend-dot activate"></span>
                                    <span class="legend-label">Activate learning</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="promote">
                                    <span class="legend-dot promote"></span>
                                    <span class="legend-label">Promote thinking and discussion</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="facilitate">
                                    <span class="legend-dot facilitate"></span>
                                    <span class="legend-label">Facilitate demonstration of learning</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="monitor">
                                    <span class="legend-dot monitor"></span>
                                    <span class="legend-label">Monitor and provide feedback</span>
                                    <span class="legend-value"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Types of Interaction</h3>
                            <p>Time distribution (in minutes)</p>
                        </div>
                        <div class="chart-body">
                            <div class="pie-chart interaction-chart" data-chart="interaction">
                                <span class="pie-label" data-slice="community"></span>
                                <span class="pie-label" data-slice="class"></span>
                                <span class="pie-label" data-slice="group"></span>
                                <span class="pie-label" data-slice="individual"></span>
                            </div>
                            <div class="chart-legend">
                                <div class="chart-legend-item" data-key="community">
                                    <span class="legend-dot community"></span>
                                    <span class="legend-label">Student - Community</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="class">
                                    <span class="legend-dot class"></span>
                                    <span class="legend-label">Teacher - Student</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="group">
                                    <span class="legend-dot group"></span>
                                    <span class="legend-label">Student - Student</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="individual">
                                    <span class="legend-dot individual"></span>
                                    <span class="legend-label">Student - Content</span>
                                    <span class="legend-value"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Key Application of Technology</h3>
                            <p>Time distribution (in minutes)</p>
                        </div>
                        <div class="chart-body">
                            <div class="pie-chart keyapp-chart" data-chart="keyapp">
                                <span class="pie-label" data-slice="support-assessment"></span>
                                <span class="pie-label" data-slice="foster-conceptual"></span>
                                <span class="pie-label" data-slice="provide-differentiation"></span>
                                <span class="pie-label" data-slice="facilitate-learning-together"></span>
                                <span class="pie-label" data-slice="develop-metacognition"></span>
                                <span class="pie-label" data-slice="enable-personalisation"></span>
                                <span class="pie-label" data-slice="embed-scaffolding"></span>
                                <span class="pie-label" data-slice="increase-motivation"></span>
                            </div>
                            <div class="chart-legend">
                                <div class="chart-legend-item" data-key="support-assessment">
                                    <span class="legend-dot keyapp-support"></span>
                                    <span class="legend-label">Support Assessment for Learning</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="foster-conceptual">
                                    <span class="legend-dot keyapp-conceptual"></span>
                                    <span class="legend-label">Foster Conceptual Change</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="provide-differentiation">
                                    <span class="legend-dot keyapp-differentiation"></span>
                                    <span class="legend-label">Provide Differentiation</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="facilitate-learning-together">
                                    <span class="legend-dot keyapp-together"></span>
                                    <span class="legend-label">Facilitate Learning Together</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="develop-metacognition">
                                    <span class="legend-dot keyapp-metacognition"></span>
                                    <span class="legend-label">Develop Metacognition</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="enable-personalisation">
                                    <span class="legend-dot keyapp-personalisation"></span>
                                    <span class="legend-label">Enable Personalisation</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="embed-scaffolding">
                                    <span class="legend-dot keyapp-scaffolding"></span>
                                    <span class="legend-label">Embed Scaffolding</span>
                                    <span class="legend-value"></span>
                                </div>
                                <div class="chart-legend-item" data-key="increase-motivation">
                                    <span class="legend-dot keyapp-motivation"></span>
                                    <span class="legend-label">Increase Motivation</span>
                                    <span class="legend-value"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-footnote">
                    <p>Footnote:</p>
                    <ol>
                        <li>Charts are for teacher to reflect on their created lesson plan and design lesson.</li>
                        <li>Time allocated for the different types of activity and types of interaction are to support teachers in reflecting if the activity design is adequate for the learning outcome.</li>
                        <li>There is no specific ratio for the time spends and types of interaction.</li>
                    </ol>
                </div>
                </div>
            </div>
        </div>

        <!-- LCC PROMPT TAB -->
        <div id="lcc" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Lesson Plan Prompt Generator (using Lesson Collaborator Chatbot)</h2>
                </div>
                <p class="instruction-text">
                    Copy the entire prompt below and paste it into the Lesson Collaborator (LCC) on AIBots
                    (<a class="instruction-link" href="https://go.gov.sg/lcc-aibots" target="_blank" rel="noopener noreferrer">https://go.gov.sg/lcc-aibots</a>)
                    to generate a complete lesson plan.
                </p>
                <p class="instruction-text">The markdown box captures all inputs from the earlier sections.</p>
                <div class="markdown-panel">
                    <div class="markdown-toolbar">
                        <button class="btn btn-secondary" id="copyPromptBtn" type="button">Copy prompt</button>
                        <span class="copy-status" id="copyStatus" aria-live="polite"></span>
                    </div>
                    <textarea id="promptMarkdown" class="markdown-box" readonly></textarea>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
